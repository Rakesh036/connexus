<%- layout("/layouts/boilerplate") -%>
<div class="container mt-3">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <!-- Back to Donations with Icon -->
            <a href="/donations" class="btn btn-secondary d-inline-flex align-items-center">
                <i class="fa-solid fa-left-long"></i>
                Back to Donations
            </a>
            <br><br>

            <h1 class="mb-4"><%= donation.title %></h1>
            <p><%= donation.description %></p>

            <% if (currUser && donation.owner && donation.owner.equals(currUser._id)) { %>
            <div class="d-flex mb-3">
                <a href="/donations/<%= donation._id %>/edit" class="btn btn-warning me-2">Edit</a>
                <form action="/donations/<%= donation._id %>?_method=DELETE" method="POST">
                    <button class="btn btn-danger">Delete</button>
                </form>
            </div>
            <% } %>
            <form action="/donations/<%= donation._id %>/transactions" method="POST">
                <div class="mb-3">
                    <label for="amount" class="form-label">Donation Amount</label>
                    <input type="number" id="amount" name="transaction[amount]" class="form-control" value="10"
                        required>
                </div>
                <button type="submit" class="btn btn-primary">Donate</button>
            </form>

            <hr>
            <br>
            <h3>Transactions</h3>
            <% donation.transactions.forEach(transaction => { %>
            <div class="mb-3 d-flex">
                <p><strong>Donor:</strong> <%= transaction.donor.username %>&nbsp;&nbsp;&nbsp;&nbsp;</p>
                <p><strong>Amount:</strong> <%= transaction.amount %> rupees&nbsp;&nbsp;&nbsp;&nbsp;</p>

                <p><strong>transaction id: </strong><%= transaction._id %></p>
            </div>
            <% }) %>



        </div>
    </div>
</div>